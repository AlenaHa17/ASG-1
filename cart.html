<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - Crum</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/normalize.css">
    <link rel="stylesheet" href="styles/style.css">
</head>

<body>
    <header class="header">
        <div class="header-top">
            <div class="container">
                <div class="logo">Crum ♥</div>
                <div class="header-actions">
                    <a href="#" class="search-btn">Search</a>
                    <a href="cart.html" class="cart-btn">Cart (0)</a>
                    <a href="#" class="login-btn">Login</a>
                </div>
            </div>
        </div>
        
        <nav class="main-nav">
            <div class="container">
                <ul class="nav-menu">
                    <li><a href="index.html">All Items</a></li>
                    <li><a href="shop.html">New Arrivals</a></li>
                    <li class="dropdown">
                        <a href="category.html" class="dropbtn">Category</a>
                        <div class="dropdown-content">
                            <a href="category-outerwear.html">Outerwear</a>
                            <a href="category-tops.html">Tops</a>
                            <a href="category-bottoms.html">Bottoms</a>
                            <a href="category-onepiece.html">One Piece</a>
                            <a href="category-setup.html">Setup</a>
                            <a href="category-bag.html">Bag</a>
                            <a href="category-accessories.html">Accessories</a>
                        </div>
                    <li><a href="ranking.html">Ranking</a></li>
                    <li><a href="coordinate.html">Coordinate</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section class="cart-hero">
            <div class="container">
                <h1>~ Shopping Cart ~</h1>
            </div>
        </section>

        <section class="all-products">
            <div class="container">
                <div class="cart-container">
                    <h2 class="cart-section-title">ITEMS</h2>
                    
                    <div class="cart-items" id="cartItems">
                         <!-- Cart items will be inserted here -->
                        <div class="empty-cart">
                            <h3>Your cart is empty</h3>
                            <p>Add some products to see them here!</p>
                            <a href="shop.html" class="shop-btn" style="margin-top: 0.8rem;">Continue Shopping</a>
                        </div>
                    </div>

                    <div class="cart-summary" id="cartSummary" style="display: none;">
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping</span>
                            <span>Calculated at checkout</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total</span>
                            <span id="total">$0.00</span>
                        </div>
                        
                        <div class="cart-actions">
                            <a href="shop.html" class="continue-btn">Continue Shopping</a>
                            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>Crum © 2025 - Soft essentials for everyday charm</p>
    </footer>

    <script src="scripts/script.js"></script>
    
    <!-- Cart page specific JavaScript -->
    <script>
        // Cart page specific functions
        function displayCartItems() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartItemsContainer = document.getElementById('cartItems');
            const cartSummary = document.getElementById('cartSummary');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-cart">
                        <h3>Your cart is empty</h3>
                        <p>Add some products to see them here!</p>
                        <a href="shop.html" class="shop-btn" style="margin-top: 1rem;">Continue Shopping</a>
                    </div>
                `;
                cartSummary.style.display = 'none';
                return;
            }
            
            // Clear container
            cartItemsContainer.innerHTML = '';
            
            // Generate cart items
            cart.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="item-image">
                        ${item.image ? `<img src="${item.image}" alt="${item.name}">` : 'Product Image'}
                    </div>
                    <div class="item-details">
                        <h3>${item.name}</h3>
                        <div class="item-variants">
                            <span>Color: ${item.color}</span> | 
                            <span>Size: ${item.size}</span>
                        </div>
                    </div>
                    <div class="item-price">$${item.price.toLocaleString()}</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateCartQuantity(${index}, ${item.quantity - 1})">-</button>
                        <span class="quantity-display">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateCartQuantity(${index}, ${item.quantity + 1})">+</button>
                    </div>
                    <button class="remove-btn" onclick="removeCartItem(${index})">Remove</button>
                `;
                cartItemsContainer.appendChild(itemElement);
            });
            
            // Update summary
            updateCartSummary();
            cartSummary.style.display = 'block';
        }
        
        function updateCartQuantity(index, newQuantity) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart[index]) {
                cart[index].quantity = Math.max(1, newQuantity);
                localStorage.setItem('cart', JSON.stringify(cart));
                displayCartItems();
                // Update cart count using function from shared script
                if (typeof updateCartCount === 'function') {
                    updateCartCount();
                }
            }
        }
        
        function removeCartItem(index) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            displayCartItems();
            // Update cart count using function from shared script
            if (typeof updateCartCount === 'function') {
                updateCartCount();
            }
        }
        
        function updateCartSummary() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            document.getElementById('subtotal').textContent = `$${subtotal.toLocaleString()}`;
            document.getElementById('total').textContent = `$${subtotal.toLocaleString()}`;
        }
        
        function checkout() {
            alert('Checking out ♥');
        }
        
        // Initialize cart display on page load
        document.addEventListener('DOMContentLoaded', function() {
            displayCartItems();
        });
    </script>
</body>
</html>